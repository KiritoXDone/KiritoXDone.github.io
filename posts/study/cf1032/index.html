<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Codeforces Round 1032 (Div. 3) | KiritoXD&#39;s Blog</title>
<meta name="keywords" content="Codeforces, 补题">
<meta name="description" content="补题">
<meta name="author" content="KiritoXD">
<link rel="canonical" href="https://blog.050623.xyz/posts/study/cf1032/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.050623.xyz/img/a.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.050623.xyz/img/a.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.050623.xyz/img/a.png">
<link rel="apple-touch-icon" href="https://blog.050623.xyz/img/a.png">
<link rel="mask-icon" href="https://blog.050623.xyz/img/a.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://blog.050623.xyz/posts/study/cf1032/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css" integrity="sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js" integrity="sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>



  

<meta property="og:title" content="Codeforces Round 1032 (Div. 3)" />
<meta property="og:description" content="补题" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.050623.xyz/posts/study/cf1032/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2025-07-09T17:48:30+08:00" />
<meta property="article:modified_time" content="2025-07-09T17:48:30+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Codeforces Round 1032 (Div. 3)"/>
<meta name="twitter:description" content="补题"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://blog.050623.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "📖 学习",
      "item": "https://blog.050623.xyz/posts/study/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Codeforces Round 1032 (Div. 3)",
      "item": "https://blog.050623.xyz/posts/study/cf1032/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Codeforces Round 1032 (Div. 3)",
  "name": "Codeforces Round 1032 (Div. 3)",
  "description": "补题",
  "keywords": [
    "Codeforces", "补题"
  ],
  "articleBody": "A. Letter Home 要么先走到左侧，要么走到右侧，然后整行走了。\n#include using namespace std; #define endl \"\\n\" typedef long long ll; const int N = 1e5 + 7, mod = 1e9 + 7; void solve() { int n, m; cin \u003e\u003e n \u003e\u003e m; vector\u003cint\u003e x(n + 1); for (int i = 1; i \u003c= n; i++) { cin \u003e\u003e x[i]; } int ans = min(abs(m - x[1]), abs(x[n] - m)) + x[n] - x[1]; cout \u003c\u003c ans \u003c\u003c endl; } int main() { ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); int t = 1; cin \u003e\u003e t; while (t--) solve(); return 0; } B. Above the Clouds 考虑 b 只有一个字符，如果这个字符出现次数大于 2，那么一定 Yes。\n#include using namespace std; #define endl \"\\n\" typedef long long ll; const int N = 1e5 + 7, mod = 1e9 + 7; void solve() { int n; string s; cin \u003e\u003e n \u003e\u003e s; vector\u003cint\u003e cnt(26, 0); for (char c : s) { cnt[c - 'a']++; } for (int i = 1; i \u003c n - 1; i++) { if (cnt[s[i] - 'a'] \u003e 1) { cout \u003c\u003c \"YES\" \u003c\u003c endl; return; } } cout \u003c\u003c \"NO\" \u003c\u003c endl; } int main() { ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); int t = 1; cin \u003e\u003e t; while (t--) solve(); return 0; } C. Those Who Are With Us 可以发现答案只可能是 mx，或 mx - 1。\n统计每行每列中的 mx 个数，遍历每个元素，看行列上有多少个 mx，如果这个元素本身是 mx, 那么会多算一个，要减去。\n#include using namespace std; #define endl \"\\n\" typedef long long ll; const int N = 1e5 + 7, mod = 1e9 + 7; void solve() { int n, m; cin \u003e\u003e n \u003e\u003e m; int mx = 0; map\u003cint, int\u003e cnt; map\u003cint, int\u003e row, col; vector\u003cvector\u003cint\u003e\u003e a(n + 1, vector\u003cint\u003e(m + 1)); for (int i = 1; i \u003c= n; i++) { for (int j = 1; j \u003c= m; j++) { int x; cin \u003e\u003e x; mx = max(mx, x); cnt[x]++; a[i][j] = x; } } int ans = mx; for (int i = 1; i \u003c= n; i++) { for (int j = 1; j \u003c= m; j++) { if(a[i][j] == mx) row[i]++, col[j]++; } } for (int i = 1; i \u003c= n; i++) { for (int j = 1; j \u003c= m; j++) { int tmp = row[i] + col[j]; if (a[i][j] == mx) tmp--; if (tmp == cnt[mx]) { cout \u003c\u003c ans - 1 \u003c\u003c endl; return; } } } cout \u003c\u003c ans \u003c\u003c endl; } int main() { ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); int t = 1; cin \u003e\u003e t; while (t--) solve(); return 0; } D. 1709 可以观察到，数组极小，仅 40，暴力来搞即可，对两个数组冒泡，再从头到尾判断上面不能比下面大即可。\n#include using namespace std; #define endl \"\\n\" typedef long long ll; const int N = 1e5 + 7, mod = 1e9 + 7; void solve() { int n; cin \u003e\u003e n; vector\u003cint\u003e a(n + 1), b(n + 1); for (int i = 1; i \u003c= n; i++) { cin \u003e\u003e a[i]; } for (int i = 1; i \u003c= n; i++) { cin \u003e\u003e b[i]; } vector\u003cpair\u003cint, int\u003e\u003e ans; for (int i = 1; i \u003c= n; i++) { for (int j = 2; j \u003c= n; j++) { if (a[j - 1] \u003e a[j]) { swap(a[j - 1], a[j]); ans.push_back({1, j - 1}); } } } for (int i = 1; i \u003c= n; i++) { for (int j = 2; j \u003c= n; j++) { if (b[j - 1] \u003e b[j]) { swap(b[j - 1], b[j]); ans.push_back({2, j - 1}); } } } for (int i = 1; i \u003c= n; i++) { if (a[i] \u003e b[i]) { ans.push_back({3, i}); } } cout \u003c\u003c ans.size() \u003c\u003c endl; for (auto \u0026p : ans) { cout \u003c\u003c p.first \u003c\u003c \" \" \u003c\u003c p.second \u003c\u003c endl; } } int main() { ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); int t = 1; cin \u003e\u003e t; while (t--) solve(); return 0; } E. Sponsor of Your Problems 数位 DP，从左往右看两个数。\n有两种特殊情况：\n左侧片段和 l 相同，当前这一位只能 \u003e= $l_i$ 左侧片段和 r 相同，当前这一位只能 \u003c= $r_i$ 其余情况能任意取，保证最小即可。\n具体可参考代码\n#include using namespace std; #define endl \"\\n\" typedef long long ll; const int N = 1e5 + 7, mod = 1e9 + 7; void solve() { string l, r; cin \u003e\u003e l \u003e\u003e r; int n = l.size(); vector\u003cvector\u003cint\u003e\u003e f(2, vector\u003cint\u003e(2, 0)), nf(2, vector\u003cint\u003e(2, 0)); //优化空间，只开两层。 for (int i = 0; i \u003c 2; i++) { for (int j = 0; j \u003c 2; j++) f[i][j] = nf[i][j] = 1e9; } f[1][1] = 0; for (int i = 0; i \u003c n; i++) { for (int a = 0; a \u003c 2; ++a) for (int b = 0; b \u003c 2; ++b) nf[a][b] = 1e9; int dl = l[i] - '0', dr = r[i] - '0'; for (int a = 0; a \u003c 2; ++a) { for (int b = 0; b \u003c 2; ++b) { if (f[a][b] \u003c 1e9) { int lo = a ? dl : 0; //如果前面和 l 相同，则只能取大于等于 l 当前位 int hi = b ? dr : 9; //如果前面和 r 相同，则只能取小于等于 r 当前位 for (int d = lo; d \u003c= hi; d++) { int c = (d == dl) + (d == dr); //当前代价 int na = a \u0026\u0026 (d == dl); //前面相同，同时这一位也相同，保留状态 int nb = b \u0026\u0026 (d == dr); nf[na][nb] = min(nf[na][nb], f[a][b] + c); //取最优 } } } } f = nf; } int ans = min({f[0][0], f[0][1], f[1][0], f[1][1]}); cout \u003c\u003c ans \u003c\u003c endl; } int main() { ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); int t = 1; cin \u003e\u003e t; while (t--) solve(); return 0; } F. Yamakasi 统计前缀和出现次数，查找当前前缀和 - s 的出现次数，以大于 x 的为分界线，遇到就重置当前统计量。\n以函数实现，查找 x 和 x - 1 相减即只剩下 x 的\n#include using namespace std; #define endl \"\\n\" typedef long long ll; const int N = 1e5 + 7, mod = 1e9 + 7; void solve() { ll n, s, x; cin \u003e\u003e n \u003e\u003e s \u003e\u003e x; vector\u003cll\u003e a(n + 10), pre(n + 10); for (int i = 1; i \u003c= n; i++) { cin \u003e\u003e a[i]; pre[i] = pre[i - 1] + a[i]; } ll ans = 0; auto calc = [\u0026](ll x) { map\u003cll, int\u003e cnt; cnt[0] = 1; ll res = 0; for (int i = 1; i \u003c= n; i++) { if (a[i] \u003e x) { cnt.clear(); } if (cnt.count(pre[i] - s)) { res += cnt[pre[i] - s]; } cnt[pre[i]]++; } return res; }; ans = calc(x) - calc(x - 1); cout \u003c\u003c ans \u003c\u003c endl; } int main() { ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); int t = 1; cin \u003e\u003e t; while (t--) solve(); return 0; } G. Gangsta 设 1 出现次数为 a，0 出现次数为 b，那么 $\\max(a, b) = \\frac{a + b + |a - b|}{2}$\n即 $f(s_{l..r}) = \\frac{(c_0(l, r) + c_1(l, r)) + |c_1(l, r) - c_0(l, r)|}{2}$\n现在，总和 $S$ 可以被分解为两部分： $S = \\sum_{1 \\le l \\le r \\le n} \\frac{(c_0(l, r) + c_1(l, r)) + |c_1(l, r) - c_0(l, r)|}{2}$ $S = \\frac{1}{2} \\left( \\sum_{1 \\le l \\le r \\le n} (c_0(l, r) + c_1(l, r)) + \\sum_{1 \\le l \\le r \\le n} |c_1(l, r) - c_0(l, r)| \\right)$\n#include using namespace std; #define endl \"\\n\" typedef long long ll; const int N = 1e5 + 7, mod = 1e9 + 7; void solve() { int n; string s; cin \u003e\u003e n \u003e\u003e s; vector\u003cll\u003e p(n + 1, 0); for (int i = 1; i \u003c= n; i++) { if (s[i - 1] == '1') p[i] = p[i - 1] + 1; else p[i] = p[i - 1] - 1; } sort(p.begin(), p.end()); ll ans = 0; ll sum = 0, tot = 0; for (int i = 0; i \u003c= n; i++) { tot += i * p[i] - sum; sum += p[i]; } ll total = 1ll * n * (n + 1) * (n + 2) / 6; ans = (total + tot) / 2; cout \u003c\u003c ans \u003c\u003c endl; } int main() { ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); int t = 1; cin \u003e\u003e t; while (t--) solve(); return 0; } H. Ice Baby 思维路径\n问题的本质是什么？ 我们想找一个最长的索引序列 $1 \\leq i_1 \u003c i_2 \u003c … \u003c i_m \\leq k$，使得我们能够找到对应的值 $a_{i_1}, a_{i_2}, …, a_{i_m}$，满足 $l_{i_j} \\leq a_{i_j} \\leq r_{i_j}$ 且 $a_{i_1} \\leq a_{i_2} \\leq … \\leq a_{i_m}$。\n一个子序列何时“可能”是非递减的？ 考虑两个索引 $i \u003c j$。我们什么时候一定不能让 $a_i \\leq a_j$？当 $a_i$ 的取值范围 $[l_i, r_i]$ 中的任何数都大于 $a_j$ 的取值范围 $[l_j, r_j]$ 中的任何数时。这种情况发生的条件是 $l_i \u003e r_j$。如果 $l_i \u003e r_j$，那么任何 $a_i \\geq l_i$ 和 $a_j \\leq r_j$ 都必然导致 $a_i \u003e a_j$。\n问题转化：偏序集与Dilworth定理 我们可以基于上述观察定义一个偏序关系。在集合 ${1, 2, …, k}$ 上定义一个关系 $\\prec$： $i \\prec j$ 当且仅当 $i \u003c j$ 且 $l_i \u003e r_j$。 这个关系 $i \\prec j$ 意味着在任何合法的数组 $a$ 中，$a_i$ 必须严格大于 $a_j$。\n链 (Chain)：一个索引序列 $i_1, i_2, …, i_p$ 如果满足 $i_1 \\prec i_2 \\prec … \\prec i_p$，则称为一个链。根据定义，这对应一个必须严格递减的子序列。 反链 (Antichain)：一个索引集合 $A$ 如果其中任意两个元素 $i, j$ 都不可比（即 $i \\not\\prec j$ 且 $j \\not\\prec i$），则称为一个反链。对于 $i, j \\in A$ 且 $i \u003c j$，我们有 $i \\not\\prec j$，这意味着 $l_i \\leq r_j$。\n关键联系\n一个索引序列可以构成非递减子序列，当且仅当它是一个反链。\n证明 (⇒): 如果 $i_1 \u003c … \u003c i_m$ 可以构成非递减子序列，那么存在 $a_{i_1} \\leq … \\leq a_{i_m}$。对于任意 $p \u003c q$，我们有 $a_{i_p} \\leq a_{i_q}$。同时 $l_{i_p} \\leq a_{i_p}$ 且 $a_{i_q} \\leq r_{i_q}$，所以 $l_{i_p} \\leq r_{i_q}$。这与 $i_p \\prec i_q$ 的定义 $l_{i_p} \u003e r_{i_q}$ 矛盾。所以 $i_p \\not\\prec i_q$，该序列是反链。 证明 (⇐): 如果 ${i_1, …, i_m}$ 是一个反链 ($i_1 \u003c … \u003c i_m$)，那么对任意 $p \u003c q$ 都有 $l_{i_p} \\leq r_{i_q}$。我们可以构造一个合法的非递减序列。例如，令 $a_{i_j} = \\max(l_{i_1}, l_{i_2}, …, l_{i_j})$。这个序列显然非递减。我们只需验证其合法性，即 $a_{i_j} \\leq r_{i_j}$。$a_{i_j}$ 是某个 $l_{i_p}$ ($p \\leq j$)。因为是反链，所以 $l_{i_p} \\leq r_{i_j}$。因此构造合法。\n应用Dilworth定理 我们的问题变成了：对于每个 $k$，在偏序集 $({1,…,k}, \\prec)$ 中找到最大反链的长度。 Dilworth定理指出：在一个偏序集中，最大反链的长度等于最小链划分的大小。 （最小链划分：用最少数量的链来覆盖集合中的所有元素）。\n贪心算法求解最小链划分 我们可以用一个在线的贪心算法来求解最小链划分的大小。这个算法与耐心排序 (Patience Sorting) 的思想非常相似。\n我们维护一系列链，并只关心每条链的末尾元素。 当我们处理新的索引 $k$ 时，我们尝试用它来扩展一条已有的链。 $k$ 可以扩展一条以 $j$ 结尾的链，当且仅当 $j \\prec k$，即 $j \u003c k$ (自然满足) 且 $l_j \u003e r_k$。 贪心策略：如果有多条链可以被 $k$ 扩展，我们应该选择哪一条？为了给后续的元素留下更多选择，我们应该扩展那条“最难被扩展”的链。在这里，我们选择 $l_j$ 最小但仍满足 $l_j \u003e r_k$ 的那条链。 如果找不到任何可以被 $k$ 扩展的链（即对所有链的末端 $j$，都有 $l_j \\leq r_k$），我们就必须用 $k$ 开始一条新的链。 在任何时候，链的数量就是当前集合的最小链划分数。\n数据结构实现 这个贪心策略可以用一个 multiset (或任何平衡二叉搜索树) 高效实现。\nmultiset s 用来存储当前所有链的末端元素的 $l$ 值。 当处理第 $k$ 个区间 $[l_k, r_k]$ 时：\n我们寻找一个 $l_j \\in s$ 满足 $l_j \u003e r_k$。根据贪心策略，我们要找最小的那个 $l_j$。这正是 *s.upper_bound(r_k)。 如果找到了 (即 s.upper_bound(r_k) 不是 s.end())，说明我们可以扩展这条链。我们将 $k$ 作为这条链新的末端。于是，从 s 中删除旧的 $l_j$，并插入新的 $l_k$。 如果没找到，说明 $k$ 无法扩展任何现有链。我们必须用 $k$ 开启一条新链。于是，我们直接向 s 中插入 $l_k$。\n这两个情况可以合并：我们总是要插入 $l_k$ (作为新链或扩展链的新末端)。如果扩展了旧链，我们才需要删除旧末端的 $l_j$。 所以，代码逻辑是： a. 查找 pos = s.upper_bound(r_k)。 b. s.insert(l_k)。 c. 如果 pos 有效 (不等于 s.end())，s.erase(pos)。 每一步操作后，s.size() 就是当前 ${1, …, k}$ 的最小链划分数，也就是我们要找的最大LNDS长度。\n#include using namespace std; #define endl \"\\n\" typedef long long ll; const int N = 1e5 + 7, mod = 1e9 + 7; void solve() { int n; cin \u003e\u003e n; multiset\u003cint\u003e s; // s.insert(0); for (int i = 1; i \u003c= n; i++) { int l, r; cin \u003e\u003e l \u003e\u003e r; auto pos = s.upper_bound(r); s.insert(l); if (pos != s.end()) s.erase(pos); cout \u003c\u003c s.size() \u003c\u003c \" \"; } cout \u003c\u003c endl; } int main() { ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); int t = 1; cin \u003e\u003e t; while (t--) solve(); return 0; } ",
  "wordCount" : "3427",
  "inLanguage": "zh",
  "datePublished": "2025-07-09T17:48:30+08:00",
  "dateModified": "2025-07-09T17:48:30+08:00",
  "author":[{
    "@type": "Person",
    "name": "KiritoXD"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.050623.xyz/posts/study/cf1032/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "KiritoXD's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.050623.xyz/img/a.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.050623.xyz/" accesskey="h" title="KiritoXD&#39;s Blog (Alt + H)">
                <img src="https://blog.050623.xyz/img/a.png" alt="" aria-label="logo"
                    height="35">KiritoXD&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.050623.xyz/search" title="🔍 搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍 搜索</span>
                </a>
            </li>
            <li>
                <a href="https://blog.050623.xyz/" title="🏠 主页">
                    <span>🏠 主页</span>
                </a>
            </li>
            <li>
                <a href="https://blog.050623.xyz/posts" title="📚 文章">
                    <span>📚 文章</span>
                </a>
            </li>
            <li>
                <a href="https://blog.050623.xyz/about" title="🙋🏻‍♂️ 关于">
                    <span>🙋🏻‍♂️ 关于</span>
                </a>
            </li>
            <li>
                <a href="https://blog.050623.xyz/archives/" title="⏱️ 归档">
                    <span>⏱️ 归档</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://blog.050623.xyz/">主页</a>&nbsp;»&nbsp;<a href="https://blog.050623.xyz/posts/">Posts</a>&nbsp;»&nbsp;<a href="https://blog.050623.xyz/posts/study/">📖 学习</a></div>
    <h1 class="post-title entry-hint-parent">
      Codeforces Round 1032 (Div. 3)
    </h1>
    <div class="post-meta">

<span title='2025-07-09 17:48:30 +0800 CST'>2025-07-09</span>&nbsp;·&nbsp;7 分钟&nbsp;·&nbsp;3427 字&nbsp;·&nbsp;KiritoXD

</div>
  </header>
  <div class="post-password">
    
  </div> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#a-letter-home" aria-label="A. Letter Home">A. Letter Home</a></li>
                    <li>
                        <a href="#b-above-the-clouds" aria-label="B. Above the Clouds">B. Above the Clouds</a></li>
                    <li>
                        <a href="#c-those-who-are-with-us" aria-label="C. Those Who Are With Us">C. Those Who Are With Us</a></li>
                    <li>
                        <a href="#d-1709" aria-label="D. 1709">D. 1709</a></li>
                    <li>
                        <a href="#e-sponsor-of-your-problems" aria-label="E. Sponsor of Your Problems">E. Sponsor of Your Problems</a></li>
                    <li>
                        <a href="#f-yamakasi" aria-label="F. Yamakasi">F. Yamakasi</a></li>
                    <li>
                        <a href="#g-gangsta" aria-label="G. Gangsta">G. Gangsta</a></li>
                    <li>
                        <a href="#h-ice-baby" aria-label="H. Ice Baby">H. Ice Baby</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>


  <div class="post-content"><h3 id="a-letter-home">A. Letter Home<a hidden class="anchor" aria-hidden="true" href="#a-letter-home">#</a></h3>
<p>要么先走到左侧，要么走到右侧，然后整行走了。</p>
<div class="highlight"><pre tabindex="0" style="color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#include</span> <span style="color:#6c7086;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#6c7086;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">using</span> <span style="color:#cba6f7">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#define endl &#34;\n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">typedef</span> <span style="color:#f38ba8">long</span> <span style="color:#f38ba8">long</span> ll;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cba6f7">const</span> <span style="color:#f38ba8">int</span> N <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e5</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>, mod <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">void</span> <span style="color:#89b4fa">solve</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> n, m;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> n <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> m;
</span></span><span style="display:flex;"><span>    vector<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span> x(n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> x[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> ans <span style="color:#89dceb;font-weight:bold">=</span> min(abs(m <span style="color:#89dceb;font-weight:bold">-</span> x[<span style="color:#fab387">1</span>]), abs(x[n] <span style="color:#89dceb;font-weight:bold">-</span> m)) <span style="color:#89dceb;font-weight:bold">+</span> x[n] <span style="color:#89dceb;font-weight:bold">-</span> x[<span style="color:#fab387">1</span>];
</span></span><span style="display:flex;"><span>    cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> ans <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">int</span> <span style="color:#89b4fa">main</span>() {
</span></span><span style="display:flex;"><span>    ios<span style="color:#89dceb;font-weight:bold">::</span>sync_with_stdio(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cout.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> t <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">while</span> (t<span style="color:#89dceb;font-weight:bold">--</span>) solve();
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">return</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="b-above-the-clouds">B. Above the Clouds<a hidden class="anchor" aria-hidden="true" href="#b-above-the-clouds">#</a></h3>
<p>考虑 b 只有一个字符，如果这个字符出现次数大于 2，那么一定 Yes。</p>
<div class="highlight"><pre tabindex="0" style="color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#include</span> <span style="color:#6c7086;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#6c7086;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">using</span> <span style="color:#cba6f7">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#define endl &#34;\n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">typedef</span> <span style="color:#f38ba8">long</span> <span style="color:#f38ba8">long</span> ll;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cba6f7">const</span> <span style="color:#f38ba8">int</span> N <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e5</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>, mod <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">void</span> <span style="color:#89b4fa">solve</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> n;
</span></span><span style="display:flex;"><span>    string s;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> n <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> s;
</span></span><span style="display:flex;"><span>    vector<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span> cnt(<span style="color:#fab387">26</span>, <span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">char</span> <span style="color:#89dceb">c</span> : s) {
</span></span><span style="display:flex;"><span>        cnt[c <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#a6e3a1">&#39;a&#39;</span>]<span style="color:#89dceb;font-weight:bold">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;</span> n <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">if</span> (cnt[s[i] <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#a6e3a1">&#39;a&#39;</span>] <span style="color:#89dceb;font-weight:bold">&gt;</span> <span style="color:#fab387">1</span>) {
</span></span><span style="display:flex;"><span>            cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> <span style="color:#a6e3a1">&#34;YES&#34;</span> <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">return</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> <span style="color:#a6e3a1">&#34;NO&#34;</span> <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">int</span> <span style="color:#89b4fa">main</span>() {
</span></span><span style="display:flex;"><span>    ios<span style="color:#89dceb;font-weight:bold">::</span>sync_with_stdio(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cout.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> t <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">while</span> (t<span style="color:#89dceb;font-weight:bold">--</span>) solve();
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">return</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="c-those-who-are-with-us">C. Those Who Are With Us<a hidden class="anchor" aria-hidden="true" href="#c-those-who-are-with-us">#</a></h3>
<p>可以发现答案只可能是 mx，或 mx - 1。</p>
<p>统计每行每列中的 mx 个数，遍历每个元素，看行列上有多少个 mx，如果这个元素本身是 mx, 那么会多算一个，要减去。</p>
<div class="highlight"><pre tabindex="0" style="color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#include</span> <span style="color:#6c7086;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#6c7086;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">using</span> <span style="color:#cba6f7">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#define endl &#34;\n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">typedef</span> <span style="color:#f38ba8">long</span> <span style="color:#f38ba8">long</span> ll;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cba6f7">const</span> <span style="color:#f38ba8">int</span> N <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e5</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>, mod <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">void</span> <span style="color:#89b4fa">solve</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> n, m;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> n <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> m;
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> mx <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>    map<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span>, <span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span> cnt;
</span></span><span style="display:flex;"><span>    map<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span>, <span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span> row, col;
</span></span><span style="display:flex;"><span>    vector<span style="color:#89dceb;font-weight:bold">&lt;</span>vector<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> a(n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">1</span>, vector<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span>(m <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">1</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> j <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; j <span style="color:#89dceb;font-weight:bold">&lt;=</span> m; j<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#f38ba8">int</span> x;
</span></span><span style="display:flex;"><span>            cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> x;
</span></span><span style="display:flex;"><span>            mx <span style="color:#89dceb;font-weight:bold">=</span> max(mx, x);
</span></span><span style="display:flex;"><span>            cnt[x]<span style="color:#89dceb;font-weight:bold">++</span>;
</span></span><span style="display:flex;"><span>            a[i][j] <span style="color:#89dceb;font-weight:bold">=</span> x;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> ans <span style="color:#89dceb;font-weight:bold">=</span> mx;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> j <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; j <span style="color:#89dceb;font-weight:bold">&lt;=</span> m; j<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">if</span>(a[i][j] <span style="color:#89dceb;font-weight:bold">==</span> mx) row[i]<span style="color:#89dceb;font-weight:bold">++</span>, col[j]<span style="color:#89dceb;font-weight:bold">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> j <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; j <span style="color:#89dceb;font-weight:bold">&lt;=</span> m; j<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#f38ba8">int</span> tmp <span style="color:#89dceb;font-weight:bold">=</span> row[i] <span style="color:#89dceb;font-weight:bold">+</span> col[j];
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">if</span> (a[i][j] <span style="color:#89dceb;font-weight:bold">==</span> mx) tmp<span style="color:#89dceb;font-weight:bold">--</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">if</span> (tmp <span style="color:#89dceb;font-weight:bold">==</span> cnt[mx]) {
</span></span><span style="display:flex;"><span>                cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> ans <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span> <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>                <span style="color:#cba6f7">return</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> ans <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">int</span> <span style="color:#89b4fa">main</span>() {
</span></span><span style="display:flex;"><span>    ios<span style="color:#89dceb;font-weight:bold">::</span>sync_with_stdio(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cout.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> t <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">while</span> (t<span style="color:#89dceb;font-weight:bold">--</span>) solve();
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">return</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="d-1709">D. 1709<a hidden class="anchor" aria-hidden="true" href="#d-1709">#</a></h3>
<p>可以观察到，数组极小，仅 40，暴力来搞即可，对两个数组冒泡，再从头到尾判断上面不能比下面大即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#include</span> <span style="color:#6c7086;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#6c7086;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">using</span> <span style="color:#cba6f7">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#define endl &#34;\n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">typedef</span> <span style="color:#f38ba8">long</span> <span style="color:#f38ba8">long</span> ll;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cba6f7">const</span> <span style="color:#f38ba8">int</span> N <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e5</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>, mod <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">void</span> <span style="color:#89b4fa">solve</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> n;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span>    vector<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span> a(n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">1</span>), b(n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> a[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> b[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    vector<span style="color:#89dceb;font-weight:bold">&lt;</span>pair<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span>, <span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> ans;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> j <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">2</span>; j <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; j<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">if</span> (a[j <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>] <span style="color:#89dceb;font-weight:bold">&gt;</span> a[j]) {
</span></span><span style="display:flex;"><span>                swap(a[j <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>], a[j]);
</span></span><span style="display:flex;"><span>                ans.push_back({<span style="color:#fab387">1</span>, j <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>});
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> j <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">2</span>; j <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; j<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">if</span> (b[j <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>] <span style="color:#89dceb;font-weight:bold">&gt;</span> b[j]) {
</span></span><span style="display:flex;"><span>                swap(b[j <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>], b[j]);
</span></span><span style="display:flex;"><span>                ans.push_back({<span style="color:#fab387">2</span>, j <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>});
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">if</span> (a[i] <span style="color:#89dceb;font-weight:bold">&gt;</span> b[i]) {
</span></span><span style="display:flex;"><span>            ans.push_back({<span style="color:#fab387">3</span>, i});
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> ans.size() <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#cba6f7">auto</span> <span style="color:#89dceb;font-weight:bold">&amp;</span><span style="color:#89dceb">p</span> : ans) {
</span></span><span style="display:flex;"><span>        cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> p.first <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> <span style="color:#a6e3a1">&#34; &#34;</span> <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> p.second <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">int</span> <span style="color:#89b4fa">main</span>() {
</span></span><span style="display:flex;"><span>    ios<span style="color:#89dceb;font-weight:bold">::</span>sync_with_stdio(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cout.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> t <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">while</span> (t<span style="color:#89dceb;font-weight:bold">--</span>) solve();
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">return</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="e-sponsor-of-your-problems">E. Sponsor of Your Problems<a hidden class="anchor" aria-hidden="true" href="#e-sponsor-of-your-problems">#</a></h3>
<p>数位 DP，从左往右看两个数。</p>
<p>有两种特殊情况：</p>
<ul>
<li>左侧片段和 l 相同，当前这一位只能 &gt;= $l_i$</li>
<li>左侧片段和 r 相同，当前这一位只能 &lt;= $r_i$</li>
</ul>
<p>其余情况能任意取，保证最小即可。</p>
<p>具体可参考代码</p>
<div class="highlight"><pre tabindex="0" style="color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#include</span> <span style="color:#6c7086;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#6c7086;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">using</span> <span style="color:#cba6f7">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#define endl &#34;\n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">typedef</span> <span style="color:#f38ba8">long</span> <span style="color:#f38ba8">long</span> ll;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cba6f7">const</span> <span style="color:#f38ba8">int</span> N <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e5</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>, mod <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">void</span> <span style="color:#89b4fa">solve</span>() {
</span></span><span style="display:flex;"><span>    string l, r;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> l <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> r;
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> n <span style="color:#89dceb;font-weight:bold">=</span> l.size();
</span></span><span style="display:flex;"><span>    vector<span style="color:#89dceb;font-weight:bold">&lt;</span>vector<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> f(<span style="color:#fab387">2</span>, vector<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span>(<span style="color:#fab387">2</span>, <span style="color:#fab387">0</span>)), nf(<span style="color:#fab387">2</span>, vector<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span>(<span style="color:#fab387">2</span>, <span style="color:#fab387">0</span>));  <span style="color:#6c7086;font-style:italic">//优化空间，只开两层。  
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>; i <span style="color:#89dceb;font-weight:bold">&lt;</span> <span style="color:#fab387">2</span>; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> j <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>; j <span style="color:#89dceb;font-weight:bold">&lt;</span> <span style="color:#fab387">2</span>; j<span style="color:#89dceb;font-weight:bold">++</span>) f[i][j] <span style="color:#89dceb;font-weight:bold">=</span> nf[i][j] <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    f[<span style="color:#fab387">1</span>][<span style="color:#fab387">1</span>] <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>; i <span style="color:#89dceb;font-weight:bold">&lt;</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> a <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>; a <span style="color:#89dceb;font-weight:bold">&lt;</span> <span style="color:#fab387">2</span>; <span style="color:#89dceb;font-weight:bold">++</span>a)
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> b <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>; b <span style="color:#89dceb;font-weight:bold">&lt;</span> <span style="color:#fab387">2</span>; <span style="color:#89dceb;font-weight:bold">++</span>b) nf[a][b] <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f38ba8">int</span> dl <span style="color:#89dceb;font-weight:bold">=</span> l[i] <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#a6e3a1">&#39;0&#39;</span>, dr <span style="color:#89dceb;font-weight:bold">=</span> r[i] <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#a6e3a1">&#39;0&#39;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> a <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>; a <span style="color:#89dceb;font-weight:bold">&lt;</span> <span style="color:#fab387">2</span>; <span style="color:#89dceb;font-weight:bold">++</span>a) {
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> b <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>; b <span style="color:#89dceb;font-weight:bold">&lt;</span> <span style="color:#fab387">2</span>; <span style="color:#89dceb;font-weight:bold">++</span>b) {
</span></span><span style="display:flex;"><span>                <span style="color:#cba6f7">if</span> (f[a][b] <span style="color:#89dceb;font-weight:bold">&lt;</span> <span style="color:#fab387">1e9</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#f38ba8">int</span> lo <span style="color:#89dceb;font-weight:bold">=</span> a <span style="color:#89dceb;font-weight:bold">?</span> <span style="color:#89dceb">dl</span> : <span style="color:#fab387">0</span>; <span style="color:#6c7086;font-style:italic">//如果前面和 l 相同，则只能取大于等于 l 当前位
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span>                    <span style="color:#f38ba8">int</span> hi <span style="color:#89dceb;font-weight:bold">=</span> b <span style="color:#89dceb;font-weight:bold">?</span> <span style="color:#89dceb">dr</span> : <span style="color:#fab387">9</span>; <span style="color:#6c7086;font-style:italic">//如果前面和 r 相同，则只能取小于等于 r 当前位
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span>                    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> d <span style="color:#89dceb;font-weight:bold">=</span> lo; d <span style="color:#89dceb;font-weight:bold">&lt;=</span> hi; d<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>                        <span style="color:#f38ba8">int</span> c <span style="color:#89dceb;font-weight:bold">=</span> (d <span style="color:#89dceb;font-weight:bold">==</span> dl) <span style="color:#89dceb;font-weight:bold">+</span> (d <span style="color:#89dceb;font-weight:bold">==</span> dr);  <span style="color:#6c7086;font-style:italic">//当前代价
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span>                        <span style="color:#f38ba8">int</span> na <span style="color:#89dceb;font-weight:bold">=</span> a <span style="color:#89dceb;font-weight:bold">&amp;&amp;</span> (d <span style="color:#89dceb;font-weight:bold">==</span> dl);  <span style="color:#6c7086;font-style:italic">//前面相同，同时这一位也相同，保留状态
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span>                        <span style="color:#f38ba8">int</span> nb <span style="color:#89dceb;font-weight:bold">=</span> b <span style="color:#89dceb;font-weight:bold">&amp;&amp;</span> (d <span style="color:#89dceb;font-weight:bold">==</span> dr);
</span></span><span style="display:flex;"><span>                        nf[na][nb] <span style="color:#89dceb;font-weight:bold">=</span> min(nf[na][nb], f[a][b] <span style="color:#89dceb;font-weight:bold">+</span> c); <span style="color:#6c7086;font-style:italic">//取最优
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        f <span style="color:#89dceb;font-weight:bold">=</span> nf;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> ans <span style="color:#89dceb;font-weight:bold">=</span> min({f[<span style="color:#fab387">0</span>][<span style="color:#fab387">0</span>], f[<span style="color:#fab387">0</span>][<span style="color:#fab387">1</span>], f[<span style="color:#fab387">1</span>][<span style="color:#fab387">0</span>], f[<span style="color:#fab387">1</span>][<span style="color:#fab387">1</span>]});
</span></span><span style="display:flex;"><span>    cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> ans <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">int</span> <span style="color:#89b4fa">main</span>() {
</span></span><span style="display:flex;"><span>    ios<span style="color:#89dceb;font-weight:bold">::</span>sync_with_stdio(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cout.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> t <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">while</span> (t<span style="color:#89dceb;font-weight:bold">--</span>) solve();
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">return</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="f-yamakasi">F. Yamakasi<a hidden class="anchor" aria-hidden="true" href="#f-yamakasi">#</a></h3>
<p>统计前缀和出现次数，查找当前前缀和 - s 的出现次数，以大于 x 的为分界线，遇到就重置当前统计量。</p>
<p>以函数实现，查找 x 和 x - 1 相减即只剩下 x 的</p>
<div class="highlight"><pre tabindex="0" style="color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#include</span> <span style="color:#6c7086;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#6c7086;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">using</span> <span style="color:#cba6f7">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#define endl &#34;\n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">typedef</span> <span style="color:#f38ba8">long</span> <span style="color:#f38ba8">long</span> ll;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cba6f7">const</span> <span style="color:#f38ba8">int</span> N <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e5</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>, mod <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">void</span> <span style="color:#89b4fa">solve</span>() {
</span></span><span style="display:flex;"><span>    ll n, s, x;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> n <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> s <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> x;
</span></span><span style="display:flex;"><span>    vector<span style="color:#89dceb;font-weight:bold">&lt;</span>ll<span style="color:#89dceb;font-weight:bold">&gt;</span> a(n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">10</span>), pre(n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">10</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> a[i];
</span></span><span style="display:flex;"><span>        pre[i] <span style="color:#89dceb;font-weight:bold">=</span> pre[i <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>] <span style="color:#89dceb;font-weight:bold">+</span> a[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ll ans <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">auto</span> calc <span style="color:#89dceb;font-weight:bold">=</span> [<span style="color:#89dceb;font-weight:bold">&amp;</span>](ll x) {
</span></span><span style="display:flex;"><span>        map<span style="color:#89dceb;font-weight:bold">&lt;</span>ll, <span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span> cnt;
</span></span><span style="display:flex;"><span>        cnt[<span style="color:#fab387">0</span>] <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>        ll res <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">if</span> (a[i] <span style="color:#89dceb;font-weight:bold">&gt;</span> x) {
</span></span><span style="display:flex;"><span>                cnt.clear();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#cba6f7">if</span> (cnt.count(pre[i] <span style="color:#89dceb;font-weight:bold">-</span> s)) {
</span></span><span style="display:flex;"><span>                res <span style="color:#89dceb;font-weight:bold">+=</span> cnt[pre[i] <span style="color:#89dceb;font-weight:bold">-</span> s];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            cnt[pre[i]]<span style="color:#89dceb;font-weight:bold">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">return</span> res;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    ans <span style="color:#89dceb;font-weight:bold">=</span> calc(x) <span style="color:#89dceb;font-weight:bold">-</span> calc(x <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> ans <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">int</span> <span style="color:#89b4fa">main</span>() {
</span></span><span style="display:flex;"><span>    ios<span style="color:#89dceb;font-weight:bold">::</span>sync_with_stdio(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cout.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> t <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">while</span> (t<span style="color:#89dceb;font-weight:bold">--</span>) solve();
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">return</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="g-gangsta">G. Gangsta<a hidden class="anchor" aria-hidden="true" href="#g-gangsta">#</a></h3>
<p>设 1 出现次数为 a，0 出现次数为 b，那么 $\max(a, b) = \frac{a + b + |a - b|}{2}$</p>
<p>即 $f(s_{l..r}) = \frac{(c_0(l, r) + c_1(l, r)) + |c_1(l, r) - c_0(l, r)|}{2}$</p>
<p>现在，总和 $S$ 可以被分解为两部分：
$S = \sum_{1 \le l \le r \le n} \frac{(c_0(l, r) + c_1(l, r)) + |c_1(l, r) - c_0(l, r)|}{2}$
$S = \frac{1}{2} \left( \sum_{1 \le l \le r \le n} (c_0(l, r) + c_1(l, r)) + \sum_{1 \le l \le r \le n} |c_1(l, r) - c_0(l, r)| \right)$</p>
<div class="highlight"><pre tabindex="0" style="color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#include</span> <span style="color:#6c7086;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#6c7086;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">using</span> <span style="color:#cba6f7">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#define endl &#34;\n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">typedef</span> <span style="color:#f38ba8">long</span> <span style="color:#f38ba8">long</span> ll;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cba6f7">const</span> <span style="color:#f38ba8">int</span> N <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e5</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>, mod <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">void</span> <span style="color:#89b4fa">solve</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> n;
</span></span><span style="display:flex;"><span>    string s;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> n <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> s;
</span></span><span style="display:flex;"><span>    vector<span style="color:#89dceb;font-weight:bold">&lt;</span>ll<span style="color:#89dceb;font-weight:bold">&gt;</span> p(n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">1</span>, <span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">if</span> (s[i <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>] <span style="color:#89dceb;font-weight:bold">==</span> <span style="color:#a6e3a1">&#39;1&#39;</span>) p[i] <span style="color:#89dceb;font-weight:bold">=</span> p[i <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>] <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">else</span> p[i] <span style="color:#89dceb;font-weight:bold">=</span> p[i <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>] <span style="color:#89dceb;font-weight:bold">-</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    sort(p.begin(), p.end());
</span></span><span style="display:flex;"><span>    ll ans <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>    ll sum <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>, tot <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">0</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        tot <span style="color:#89dceb;font-weight:bold">+=</span> i <span style="color:#89dceb;font-weight:bold">*</span> p[i] <span style="color:#89dceb;font-weight:bold">-</span> sum;
</span></span><span style="display:flex;"><span>        sum <span style="color:#89dceb;font-weight:bold">+=</span> p[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ll total <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1ll</span> <span style="color:#89dceb;font-weight:bold">*</span> n <span style="color:#89dceb;font-weight:bold">*</span> (n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">1</span>) <span style="color:#89dceb;font-weight:bold">*</span> (n <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">2</span>) <span style="color:#89dceb;font-weight:bold">/</span> <span style="color:#fab387">6</span>;
</span></span><span style="display:flex;"><span>    ans <span style="color:#89dceb;font-weight:bold">=</span> (total <span style="color:#89dceb;font-weight:bold">+</span> tot) <span style="color:#89dceb;font-weight:bold">/</span> <span style="color:#fab387">2</span>; 
</span></span><span style="display:flex;"><span>    cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> ans <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">int</span> <span style="color:#89b4fa">main</span>() {
</span></span><span style="display:flex;"><span>    ios<span style="color:#89dceb;font-weight:bold">::</span>sync_with_stdio(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cout.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> t <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">while</span> (t<span style="color:#89dceb;font-weight:bold">--</span>) solve();
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">return</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="h-ice-baby">H. Ice Baby<a hidden class="anchor" aria-hidden="true" href="#h-ice-baby">#</a></h3>
<p>思维路径</p>
<p>问题的本质是什么？
我们想找一个最长的索引序列 $1 \leq i_1 &lt; i_2 &lt; &hellip; &lt; i_m \leq k$，使得我们能够找到对应的值 $a_{i_1}, a_{i_2}, &hellip;, a_{i_m}$，满足 $l_{i_j} \leq a_{i_j} \leq r_{i_j}$ 且 $a_{i_1} \leq a_{i_2} \leq &hellip; \leq a_{i_m}$。</p>
<p>一个子序列何时“可能”是非递减的？
考虑两个索引 $i &lt; j$。我们什么时候一定不能让 $a_i \leq a_j$？当 $a_i$ 的取值范围 $[l_i, r_i]$ 中的任何数都大于 $a_j$ 的取值范围 $[l_j, r_j]$ 中的任何数时。这种情况发生的条件是 $l_i &gt; r_j$。如果 $l_i &gt; r_j$，那么任何 $a_i \geq l_i$ 和 $a_j \leq r_j$ 都必然导致 $a_i &gt; a_j$。</p>
<p>问题转化：偏序集与Dilworth定理
我们可以基于上述观察定义一个偏序关系。在集合 ${1, 2, &hellip;, k}$ 上定义一个关系 $\prec$：
$i \prec j$ 当且仅当 $i &lt; j$ 且 $l_i &gt; r_j$。
这个关系 $i \prec j$ 意味着在任何合法的数组 $a$ 中，$a_i$ 必须严格大于 $a_j$。</p>
<p>链 (Chain)：一个索引序列 $i_1, i_2, &hellip;, i_p$ 如果满足 $i_1 \prec i_2 \prec &hellip; \prec i_p$，则称为一个链。根据定义，这对应一个必须严格递减的子序列。
反链 (Antichain)：一个索引集合 $A$ 如果其中任意两个元素 $i, j$ 都不可比（即 $i \not\prec j$ 且 $j \not\prec i$），则称为一个反链。对于 $i, j \in A$ 且 $i &lt; j$，我们有 $i \not\prec j$，这意味着 $l_i \leq r_j$。</p>
<p>关键联系</p>
<p>一个索引序列可以构成非递减子序列，当且仅当它是一个反链。</p>
<p>证明 (⇒): 如果 $i_1 &lt; &hellip; &lt; i_m$ 可以构成非递减子序列，那么存在 $a_{i_1} \leq &hellip; \leq a_{i_m}$。对于任意 $p &lt; q$，我们有 $a_{i_p} \leq a_{i_q}$。同时 $l_{i_p} \leq a_{i_p}$ 且 $a_{i_q} \leq r_{i_q}$，所以 $l_{i_p} \leq r_{i_q}$。这与 $i_p \prec i_q$ 的定义 $l_{i_p} &gt; r_{i_q}$ 矛盾。所以 $i_p \not\prec i_q$，该序列是反链。
证明 (⇐): 如果 ${i_1, &hellip;, i_m}$ 是一个反链 ($i_1 &lt; &hellip; &lt; i_m$)，那么对任意 $p &lt; q$ 都有 $l_{i_p} \leq r_{i_q}$。我们可以构造一个合法的非递减序列。例如，令 $a_{i_j} = \max(l_{i_1}, l_{i_2}, &hellip;, l_{i_j})$。这个序列显然非递减。我们只需验证其合法性，即 $a_{i_j} \leq r_{i_j}$。$a_{i_j}$ 是某个 $l_{i_p}$ ($p \leq j$)。因为是反链，所以 $l_{i_p} \leq r_{i_j}$。因此构造合法。</p>
<p>应用Dilworth定理
我们的问题变成了：对于每个 $k$，在偏序集 $({1,&hellip;,k}, \prec)$ 中找到最大反链的长度。
Dilworth定理指出：在一个偏序集中，最大反链的长度等于最小链划分的大小。
（最小链划分：用最少数量的链来覆盖集合中的所有元素）。</p>
<p>贪心算法求解最小链划分
我们可以用一个在线的贪心算法来求解最小链划分的大小。这个算法与耐心排序 (Patience Sorting) 的思想非常相似。</p>
<p>我们维护一系列链，并只关心每条链的末尾元素。
当我们处理新的索引 $k$ 时，我们尝试用它来扩展一条已有的链。
$k$ 可以扩展一条以 $j$ 结尾的链，当且仅当 $j \prec k$，即 $j &lt; k$ (自然满足) 且 $l_j &gt; r_k$。
贪心策略：如果有多条链可以被 $k$ 扩展，我们应该选择哪一条？为了给后续的元素留下更多选择，我们应该扩展那条“最难被扩展”的链。在这里，我们选择 $l_j$ 最小但仍满足 $l_j &gt; r_k$ 的那条链。
如果找不到任何可以被 $k$ 扩展的链（即对所有链的末端 $j$，都有 $l_j \leq r_k$），我们就必须用 $k$ 开始一条新的链。
在任何时候，链的数量就是当前集合的最小链划分数。</p>
<p>数据结构实现
这个贪心策略可以用一个 multiset (或任何平衡二叉搜索树) 高效实现。</p>
<p>multiset<int> s 用来存储当前所有链的末端元素的 $l$ 值。
当处理第 $k$ 个区间 $[l_k, r_k]$ 时：</p>
<p>我们寻找一个 $l_j \in s$ 满足 $l_j &gt; r_k$。根据贪心策略，我们要找最小的那个 $l_j$。这正是 *s.upper_bound(r_k)。
如果找到了 (即 s.upper_bound(r_k) 不是 s.end())，说明我们可以扩展这条链。我们将 $k$ 作为这条链新的末端。于是，从 s 中删除旧的 $l_j$，并插入新的 $l_k$。
如果没找到，说明 $k$ 无法扩展任何现有链。我们必须用 $k$ 开启一条新链。于是，我们直接向 s 中插入 $l_k$。</p>
<p>这两个情况可以合并：我们总是要插入 $l_k$ (作为新链或扩展链的新末端)。如果扩展了旧链，我们才需要删除旧末端的 $l_j$。
所以，代码逻辑是：
a. 查找 pos = s.upper_bound(r_k)。
b. s.insert(l_k)。
c. 如果 pos 有效 (不等于 s.end())，s.erase(pos)。
每一步操作后，s.size() 就是当前 ${1, &hellip;, k}$ 的最小链划分数，也就是我们要找的最大LNDS长度。</p>
<div class="highlight"><pre tabindex="0" style="color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#include</span> <span style="color:#6c7086;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#6c7086;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">using</span> <span style="color:#cba6f7">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic">#define endl &#34;\n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span><span style="color:#cba6f7">typedef</span> <span style="color:#f38ba8">long</span> <span style="color:#f38ba8">long</span> ll;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cba6f7">const</span> <span style="color:#f38ba8">int</span> N <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e5</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>, mod <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1e9</span> <span style="color:#89dceb;font-weight:bold">+</span> <span style="color:#fab387">7</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">void</span> <span style="color:#89b4fa">solve</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> n;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span>    multiset<span style="color:#89dceb;font-weight:bold">&lt;</span><span style="color:#f38ba8">int</span><span style="color:#89dceb;font-weight:bold">&gt;</span> s;
</span></span><span style="display:flex;"><span>    <span style="color:#6c7086;font-style:italic">// s.insert(0);
</span></span></span><span style="display:flex;"><span><span style="color:#6c7086;font-style:italic"></span>    <span style="color:#cba6f7">for</span> (<span style="color:#f38ba8">int</span> i <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>; i <span style="color:#89dceb;font-weight:bold">&lt;=</span> n; i<span style="color:#89dceb;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#f38ba8">int</span> l, r;
</span></span><span style="display:flex;"><span>        cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> l <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> r;
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">auto</span> pos <span style="color:#89dceb;font-weight:bold">=</span> s.upper_bound(r);
</span></span><span style="display:flex;"><span>        s.insert(l);
</span></span><span style="display:flex;"><span>        <span style="color:#cba6f7">if</span> (pos <span style="color:#89dceb;font-weight:bold">!=</span> s.end()) s.erase(pos);
</span></span><span style="display:flex;"><span>        cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> s.size() <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> <span style="color:#a6e3a1">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cout <span style="color:#89dceb;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f38ba8">int</span> <span style="color:#89b4fa">main</span>() {
</span></span><span style="display:flex;"><span>    ios<span style="color:#89dceb;font-weight:bold">::</span>sync_with_stdio(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    cout.tie(<span style="color:#fab387">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f38ba8">int</span> t <span style="color:#89dceb;font-weight:bold">=</span> <span style="color:#fab387">1</span>;
</span></span><span style="display:flex;"><span>    cin <span style="color:#89dceb;font-weight:bold">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">while</span> (t<span style="color:#89dceb;font-weight:bold">--</span>) solve();
</span></span><span style="display:flex;"><span>    <span style="color:#cba6f7">return</span> <span style="color:#fab387">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://blog.050623.xyz/tags/codeforces/">Codeforces</a></li>
      <li><a href="https://blog.050623.xyz/tags/%E8%A1%A5%E9%A2%98/">补题</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://blog.050623.xyz/posts/tech/tools/">
    <span class="title">« 上一页</span>
    <br>
    <span>自建小玩具</span>
  </a>
  <a class="next" href="https://blog.050623.xyz/posts/study/cf1030/">
    <span class="title">下一页 »</span>
    <br>
    <span>Codeforces Round 1030 (Div. 2)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://blog.050623.xyz/">KiritoXD&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', () => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent;
                navigator.clipboard.writeText(text).then(copyingDone);
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replace("language-", "");
        let macTool = document.createElement("div");
        let macTool1 = document.createElement("div");
        let macTool2 = document.createElement("div");
        let macTool3 = document.createElement("div");
        let languageType = document.createElement("div");
        languageType.innerText = language;
        macTool.setAttribute('class', 'mac-tool');
        macTool1.setAttribute('class', 'mac bb1');
        macTool2.setAttribute('class', 'mac bb2');
        macTool3.setAttribute('class', 'mac bb3');
        languageType.setAttribute('class', 'language-type');
        macTool.appendChild(macTool1);
        macTool.appendChild(macTool2);
        macTool.appendChild(macTool3);
        macTool.appendChild(languageType);

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool);
        }
    });
</script>

<script>
    (function(u, c) {
      var d = document, t = 'script', o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function(e) { c(e); }); }
      s.parentNode.insertBefore(o, s);
    })('//cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js', function() {
      pangu.spacingPage();
    });
    </script>
</body>

</html>
